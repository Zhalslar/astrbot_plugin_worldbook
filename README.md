<div align="center">

![:name](https://count.getloli.com/@astrbot_plugin_worldbook?name=astrbot_plugin_worldbook&theme=minecraft&padding=6&offset=0&align=top&scale=1&pixelated=1&darkmode=auto)

# astrbot_plugin_worldbook

_âœ¨ ä¸–ç•Œä¹¦æ’ä»¶ âœ¨_  

[![License](https://img.shields.io/badge/License-GPLv3-blue.svg)](https://www.gnu.org/licenses/gpl-3.0.html)
[![Python 3.10+](https://img.shields.io/badge/Python-3.10%2B-blue.svg)](https://www.python.org/)
[![AstrBot](https://img.shields.io/badge/AstrBot-4.0%2B-orange.svg)](https://github.com/Soulter/AstrBot)
[![GitHub](https://img.shields.io/badge/ä½œè€…-Zhalslar-blue)](https://github.com/Zhalslar)

</div>

# âš ï¸ é‡è¦æé†’ï¼šå‡çº§åˆ° V2.0.0 å‰åŠ¡å¿…å¤‡ä»½æ•°æ®ï¼Œå¦åˆ™é…ç½®ä¼šä¸¢å¤±

---

## ğŸ“¦ å®‰è£…æ–¹æ³•

åœ¨ AstrBot æ’ä»¶å¸‚åœºæœç´¢ **astrbot_plugin_worldbook**ï¼Œç‚¹å‡»å®‰è£…å³å¯ã€‚

---

## ğŸ¤ è¿™æ˜¯å¹²å˜›ç”¨çš„ï¼Ÿ

è¿™æ˜¯ä¸€ä¸ª**å…³é”®è¯è§¦å‘çš„æç¤ºè¯ç®¡ç†å·¥å…·**ã€‚

ç®€å•æ¥è¯´ï¼šä½ å¯ä»¥é¢„è®¾ä¸€å †"äººè®¾å¡"æˆ–"è§„åˆ™å¡"ï¼ˆæˆ‘ä»¬å«**æ¡ç›®**ï¼‰ï¼Œå½“èŠå¤©ä¸­å‡ºç°ç‰¹å®šå…³é”®è¯æ—¶ï¼Œæ’ä»¶å°±ä¼šè‡ªåŠ¨æŠŠè¿™äº›è§„åˆ™å¡è¿› AI çš„"å¤§è„‘"ï¼ˆsystem_promptï¼‰é‡Œï¼Œè®© AI ä¸´æ—¶æ¢ä¸ªäººæ ¼ã€æ¢ä¸ªè¯­æ°”ï¼Œæˆ–è€…éµå®ˆç‰¹å®šè§„åˆ™ã€‚

**å’Œæ™®é€šçš„æç¤ºè¯æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ**

- æ™®é€šæç¤ºè¯ï¼šè¯´ä¸€æ¬¡ç®¡ä¸€å¥
- ä¸–ç•Œä¹¦ï¼šè§¦å‘åæŒç»­ç”Ÿæ•ˆä¸€æ®µæ—¶é—´ï¼Œä¸ç”¨æ¯æ¬¡éƒ½æé†’ AI

---


## ğŸ’¡ å®é™…åº”ç”¨åœºæ™¯

- **ä¸´æ—¶æ¢é£æ ¼**ï¼šè®© AI çªç„¶å˜ä¸¥è‚ƒã€å˜èŒã€å˜ä¸“ä¸š
- **å‰§æƒ…æ¨¡å¼**ï¼šè·‘å›¢æ—¶è‡ªåŠ¨æ³¨å…¥ä¸–ç•Œè§‚è®¾å®š
- **ç®¡ç†å‘˜æ¨¡å¼**ï¼šè§¦å‘å AI è¿›å…¥"æ•™å­¦æ¨¡å¼"æˆ–"å®¡æ ¸æ¨¡å¼"
- **ç¾¤èŠå½©è›‹**ï¼šç‰¹å®šå…³é”®è¯è§¦å‘éšè—äººæ ¼

> **ä¸€å¥è¯æ€»ç»“**ï¼šè¿™æ˜¯ä¸€ä¸ª**è®© AI åŠ¨æ€åˆ‡æ¢æç¤ºè¯çš„è§„åˆ™å¼•æ“**ã€‚

---

## ğŸ§  æ€ä¹ˆå·¥ä½œçš„ï¼Ÿ

1. ä½ å‘æ¶ˆæ¯ â†’ æ’ä»¶æ£€æŸ¥æ˜¯å¦å‘½ä¸­æŸä¸ªè§„åˆ™
2. å‘½ä¸­äº† â†’ æŠŠå¯¹åº”çš„äººè®¾å¡å¡è¿› AI å¤§è„‘
3. æ¥ä¸‹æ¥ä¸€æ®µæ—¶é—´ï¼ŒAI éƒ½ä¼šå¸¦ç€è¿™ä¸ªäººè®¾å›å¤
4. æ—¶é—´åˆ°äº†/æ¬¡æ•°ç”¨å®Œäº†/ä½ æ‰‹åŠ¨å–æ¶ˆ â†’ æ¢å¤é»˜è®¤

---

## âŒ¨ï¸ å‘½ä»¤å¤§å…¨

### ğŸ“Œ åªç®¡å½“å‰èŠå¤©ï¼ˆæ™®é€šç”¨æˆ·ä¹Ÿèƒ½ç”¨ï¼‰

| å‘½ä»¤ | å¹²ä»€ä¹ˆç”¨çš„ |
|------|-----------|
| `æ¡ç›®çŠ¶æ€` | çœ‹çœ‹å½“å‰æœ‰å“ªäº›è§„åˆ™æ­£åœ¨ç”Ÿæ•ˆï¼Œè¿˜å‰©å¤šä¹… |
| `æ¸…é™¤æ¡ç›®` | å–æ¶ˆå½“å‰èŠå¤©çš„æ‰€æœ‰è§„åˆ™ |
| `æ¸…é™¤æ¡ç›® åç§°1 åç§°2` | åªå–æ¶ˆæŒ‡å®šçš„è§„åˆ™ |
| `å¯ç”¨æ¡ç›® åç§°1 åç§°2` | è®©æŸä¸ªè§„åˆ™åœ¨å½“å‰èŠå¤©å¯ä»¥è§¦å‘ |
| `ç¦ç”¨æ¡ç›® åç§°1 åç§°2` | è®©æŸä¸ªè§„åˆ™åœ¨å½“å‰èŠå¤©ä¸èƒ½è§¦å‘ |

> ğŸ’¡ è¿™äº›å‘½ä»¤**åªå½±å“å½“å‰èŠå¤©**ï¼Œä¸ä¼šæ”¹å…¨å±€è®¾ç½®

---

### ğŸ§© ç®¡ç†æ‰€æœ‰è§„åˆ™ï¼ˆéœ€è¦ç®¡ç†å‘˜æƒé™ï¼‰

| å‘½ä»¤ | å¹²ä»€ä¹ˆç”¨çš„ |
|------|-----------|
| `æŸ¥çœ‹æ¡ç›®` | åˆ—å‡ºæ‰€æœ‰è§„åˆ™ |
| `æŸ¥çœ‹æ¡ç›® å¯ç”¨` | åªçœ‹å·²å¯ç”¨çš„ |
| `æŸ¥çœ‹æ¡ç›® ç¦ç”¨` | åªçœ‹å·²ç¦ç”¨çš„ |
| `æŸ¥çœ‹æ¡ç›® åç§°` | çœ‹æŸä¸ªè§„åˆ™çš„è¯¦ç»†ä¿¡æ¯ |
| `æ·»åŠ æ¡ç›® åç§° å†…å®¹` | å¿«é€Ÿæ–°å»ºä¸€ä¸ªè§„åˆ™ |
| `åˆ é™¤æ¡ç›® åç§°1 åç§°2` | åˆ é™¤è§„åˆ™ |
| `è®¾ç½®è§¦å‘è¯ åç§° è§„åˆ™1 è§„åˆ™2` | è®¾ç½®è§¦å‘è¿™ä¸ªè§„åˆ™çš„å…³é”®è¯ï¼ˆæ”¯æŒæ­£åˆ™ï¼‰ |
| `è®¾ç½®ä¼˜å…ˆçº§ åç§° æ•°å­—` | è®¾ç½®ä¼˜å…ˆçº§ï¼Œæ•°å­—è¶Šå°è¶Šä¼˜å…ˆ |

---

### ğŸ“¦ å¤‡ä»½ä¸åˆ†äº«è§„åˆ™ï¼ˆç®¡ç†å‘˜ï¼‰

| å‘½ä»¤ | å¹²ä»€ä¹ˆç”¨çš„ |
|------|-----------|
| `å¯¼å‡ºä¸–ç•Œä¹¦` | æŠŠæ‰€æœ‰è§„åˆ™æ‰“åŒ…æˆä¸€ä¸ªæ–‡ä»¶å‘ç»™ä½  |
| `å¯¼å‡ºä¸–ç•Œä¹¦ åç§°` | åªå¯¼å‡ºæŸä¸ªè§„åˆ™ |
| `å¯¼å…¥ä¸–ç•Œä¹¦` | ä»æ–‡ä»¶å¯¼å…¥è§„åˆ™ï¼ˆæ”¯æŒ json/yamlï¼‰ |

> ğŸ“„ å¯¼å…¥æ—¶ç›´æ¥å¼•ç”¨æ–‡ä»¶æ¶ˆæ¯å³å¯ï¼Œé‡å¤çš„è§„åˆ™é»˜è®¤ä¼šè·³è¿‡

---

### âš™ï¸ è§„åˆ™ç”Ÿæ•ˆçš„åº•å±‚é€»è¾‘

1. **è§¦å‘æ£€æŸ¥**ï¼šæ¶ˆæ¯å‘½ä¸­å…³é”®è¯ â†’ æ£€æŸ¥æ˜¯å¦åœ¨é€‚ç”¨èŒƒå›´å†… â†’ æŠ½æ¦‚ç‡åˆ¤å®š
2. **æ³¨å…¥æ’åº**ï¼šæŒ‰ä¼˜å…ˆçº§æ•°å­—ä»å°åˆ°å¤§æ’åˆ—ï¼Œæ•°å­—å°çš„æ’åœ¨ system_prompt å‰é¢ï¼ˆçº¦æŸåŠ›æ›´å¼ºï¼‰
3. **æ•°é‡é™åˆ¶**ï¼šè¶…è¿‡ `max_inject_count` çš„ä½ä¼˜å…ˆçº§è§„åˆ™ä¼šè¢«ä¸¢å¼ƒ

---

## ğŸ“‹ ä¸€ä¸ªè§„åˆ™ï¼ˆæ¡ç›®ï¼‰åŒ…å«ä»€ä¹ˆï¼Ÿ

| å­—æ®µå                 | å¿…å¡« | è¯´æ˜ï¼ˆé¢å‘ç”¨æˆ·ï¼‰                                               |
| ------------------- | -- | ------------------------------------------------------ |
| `name`ï¼ˆåç§°ï¼‰          | âœ…  | æ¡ç›®çš„å”¯ä¸€æ ‡è¯†ï¼Œç”¨äºç®¡ç†ã€æŸ¥è¯¢å’Œå‘½ä»¤æ“ä½œï¼›å½“æœªè®¾ç½®å…³é”®è¯æ—¶ï¼Œä¼šè‡ªåŠ¨ä½œä¸ºé»˜è®¤è§¦å‘è¯               |
| `enabled`ï¼ˆå¯ç”¨ï¼‰       | âŒ  | æ€»å¼€å…³ã€‚å…³é—­åè¯¥æ¡ç›®**å®Œå…¨ä¸å‚ä¸ä»»ä½•æ¿€æ´»åˆ¤æ–­**                              |
| `priority`ï¼ˆä¼˜å…ˆçº§ï¼‰     | âŒ  | å¤šä¸ªæ¡ç›®åŒæ—¶ç”Ÿæ•ˆæ—¶çš„æ³¨å…¥é¡ºåºï¼Œ**æ•°å­—è¶Šå°è¶Šé å‰ã€å½±å“è¶Šå¼º**                        |
| `scope`ï¼ˆæ¿€æ´»èŒƒå›´ï¼‰       | âŒ  | é™åˆ¶å“ªäº›ä¼šè¯ / ç¾¤èŠ / ç”¨æˆ·çš„æ¶ˆæ¯æ‰å¯èƒ½è§¦å‘è¯¥æ¡ç›®ï¼›å¡« `admin` è¡¨ç¤ºä»…ç®¡ç†å‘˜å¯ç”¨ï¼›ç•™ç©ºè¡¨ç¤ºä¸é™åˆ¶ |
| `keywords`ï¼ˆå…³é”®è¯è§¦å‘ï¼‰   | âŒ  | å½“æ¶ˆæ¯åŒ…å«è¿™äº›å…³é”®è¯æˆ–åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼æ—¶ï¼Œæ¡ç›®æ‰å¯èƒ½è·å¾—è§¦å‘èµ„æ ¼ï¼›ç•™ç©ºé»˜è®¤ä½¿ç”¨ `name`          |
| `cron`ï¼ˆå®šæ—¶è§¦å‘ï¼‰        | âŒ  | ä½¿ç”¨ Cron è¡¨è¾¾å¼ï¼ˆåˆ† æ—¶ æ—¥ æœˆ å‘¨ï¼‰ï¼Œåˆ°è¾¾æ—¶é—´ç‚¹åï¼Œæ¡ç›®ä¼šåœ¨**ä¸‹ä¸€æ¡æ¶ˆæ¯åˆ°æ¥æ—¶**å°è¯•ç”Ÿæ•ˆ     |
| `duration`ï¼ˆç”Ÿæ•ˆæ—¶é•¿ï¼‰    | âŒ  | æ¡ç›®æˆåŠŸç”Ÿæ•ˆåå¯æŒç»­çš„æ—¶é—´ï¼ˆç§’ï¼‰ï¼›`0` è¡¨ç¤ºæ°¸ä¹…ç”Ÿæ•ˆ                            |
| `times`ï¼ˆç”Ÿæ•ˆæ¬¡æ•°ï¼‰       | âŒ  | åœ¨ä¸€æ¬¡ç”Ÿæ•ˆå‘¨æœŸå†…æœ€å¤šæ³¨å…¥çš„æ¬¡æ•°ï¼›è¾¾åˆ°ä¸Šé™åå³ä½¿ä»åœ¨æ—¶é•¿å†…ä¹Ÿä¸å†ç”Ÿæ•ˆï¼›`0` è¡¨ç¤ºä¸é™             |
| `probability`ï¼ˆç”Ÿæ•ˆæ¦‚ç‡ï¼‰ | âŒ  | åœ¨æ»¡è¶³æ‰€æœ‰å…¶ä»–æ¡ä»¶åï¼Œæœ€ç»ˆç”Ÿæ•ˆçš„æ¦‚ç‡ï¼ˆ0~1ï¼‰ï¼Œå¸¸ç”¨äºéšæœºäº‹ä»¶                        |
| `content`ï¼ˆæ³¨å…¥å†…å®¹ï¼‰     | âœ…  | æ¡ç›®çœŸæ­£ç”Ÿæ•ˆæ—¶æ³¨å…¥ç»™æ¨¡å‹çš„**è§„åˆ™ / è®¾å®š / çŠ¶æ€èƒŒæ™¯**ï¼ˆä¸æ˜¯ä¸€æ¬¡æ€§æŒ‡ä»¤ï¼‰               |

---

## âœï¸ ç¼–å†™ä¸–ç•Œä¹¦

ä½ å¯ä»¥åœ¨é…ç½®é¢æ¿ä¸ŠåŠ¨æ€æ·»åŠ æ¡ç›®ï¼Œ ä¹Ÿå¯ä»¥ç›´æ¥ç¼–å†™ä¸–ç•Œä¹¦ï¼Œå°†è·¯å¾„å¡«å…¥ `ä¸–ç•Œä¹¦è·¯å¾„` é…ç½®é¡¹ä¸­ï¼Œç„¶åé‡è½½æ’ä»¶å³å¯åŠ è½½

ä¸ä¼šå†™æ€ä¹ˆåŠï¼Œè¯·å‚è€ƒå†…ç½®ä¸–ç•Œä¹¦ï¼š`data\plugins\astrbot_plugin_worldbook\default_lorebook.yaml`

### é€šé…ç¬¦æ”¯æŒ

ä½ å¯ä»¥åœ¨è§„åˆ™å†…å®¹é‡ŒåŠ "å˜é‡"ï¼Œæ³¨å…¥æ—¶ä¼šè‡ªåŠ¨æ›¿æ¢æˆå®é™…å€¼ï¼Œä¾‹å¦‚ï¼š

```text
 {user_name} æ˜¯ä½ çš„ç”Ÿæ­»æ­»å…šï¼Œ
    å…³ç³»æ ¸å¿ƒä¸ºç›¸çˆ±ç›¸æ€ã€‚
    å½¼æ­¤æ˜¯å¯¹æ–¹æœ€ä¿¡ä»»ã€æœ€äº²å¯†çš„æŒšå‹ï¼Œ
    çŸ¥æ ¹çŸ¥åº•ã€ä¸åˆ†å½¼æ­¤ï¼Œ
    ä¼šæ¯«æ— ä¿ç•™åœ°äº¤å¿ƒã€æ’‘è…°ï¼Œ
    ä¹Ÿä¼šæ—¥å¸¸äº’æŸã€æ‹Œå˜´ã€æ‹†å°ã€‚
```

ç›®å‰æ”¯æŒçš„å˜é‡è¿˜ä¸å¤šï¼Œåç»­ä¼šè¡¥å……ï¼š

| å˜é‡ | ä¼šå˜æˆ |
|------|--------|
| `{user_id}` | ç”¨æˆ·çš„ ID |
| `{user_name}` | ç”¨æˆ·çš„åå­— |
| `{time}` | å½“å‰æ—¶é—´ï¼ˆæ—¶:åˆ†:ç§’ï¼‰ |

> âš ï¸ å†™é”™äº†çš„å˜é‡ä¼šåŸæ ·ä¿ç•™ï¼Œä¸ä¼šæŠ¥é”™ã€‚ç›®å‰æ”¯æŒçš„å˜é‡è¿˜ä¸å¤šï¼Œåç»­ä¼šåŠ ã€‚

## ğŸ‘¥ è´¡çŒ®æŒ‡å—

- ğŸŒŸ Star æœ¬é¡¹ç›®ï¼ˆä¸ç‚¹ä¸ç»™è¿›ç¾¤ï¼‰
- ğŸ› æäº¤ Issue æŠ¥å‘Šé—®é¢˜
- ğŸ’¡ æå‡ºæ–°åŠŸèƒ½å»ºè®®
- ğŸ”§ æäº¤ Pull Request æ”¹è¿›ä»£ç 

---

## ğŸ“¢ äº¤æµåé¦ˆ

ä½œè€…æ’ä»¶åé¦ˆç¾¤ï¼ˆQQç¾¤ï¼‰ï¼š**460973561**  
ï¼ˆæƒ³ç¬¬ä¸€æ—¶é—´ä½“éªŒæ–°åŠŸèƒ½æˆ–åé¦ˆé—®é¢˜ï¼Œæ¬¢è¿è¿›ç¾¤ï¼Œä¸ç‚¹starä¸ç»™è¿›ï¼‰
